# =============================================================================
# Corso Data Platform - Test Environment Configuration
# Mirrors .env.local structure for deterministic tests
# =============================================================================

# =============================================================================
# CORE APPLICATION CONFIGURATION
# =============================================================================

NODE_ENV=test
APP_VERSION=1.0.0
NEXT_PUBLIC_STAGE=test
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=Corso Data Platform
NEXT_PUBLIC_APP_VERSION=1.0.0

# =============================================================================
# AUTHENTICATION (Clerk)
# =============================================================================

# Tests can mock Clerk; keys not used at runtime
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_mock
CLERK_SECRET_KEY=sk_test_mock
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/
NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/onboarding
CLERK_WEBHOOK_SECRET=whsec_test_mock
NEXT_PUBLIC_CLERK_SIGN_UP_FORCE_REDIRECT_URL=/onboarding

# =============================================================================
# DATABASE (Supabase)
# =============================================================================

# Tests mock network calls; values not used at runtime
NEXT_PUBLIC_SUPABASE_URL=https://example.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=anon_test_key
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=anon_test_key
# Server-side Supabase URL (required for getSupabaseAdmin() calls)
SUPABASE_URL=https://example.supabase.co
SUPABASE_SERVICE_ROLE_KEY=service_role_test_key
SUPABASE_ACCESS_TOKEN=sbp_test_token

# =============================================================================
# PAYMENT PROCESSING (Stripe)
# =============================================================================

# Stripe Configuration - Required for billing
# Tests mock Stripe; keys not used at runtime
# Development: Using TEST keys (pk_test_ and sk_test_) to avoid real charges
# Production: Use LIVE keys (pk_live_ and sk_live_) in production environment only
STRIPE_SECRET_KEY=sk_test_mock
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_mock
STRIPE_WEBHOOK_SECRET=whsec_test_mock

# =============================================================================
# ANALYTICS (ClickHouse)
# =============================================================================

# Tests mock ClickHouse; values not used at runtime
CLICKHOUSE_HOST=https://example.clickhouse.cloud:8443
CLICKHOUSE_URL=https://example.clickhouse.cloud:8443
CLICKHOUSE_DATABASE=test_db
CLICKHOUSE_READONLY_USER=test_user
CLICKHOUSE_PASSWORD=test_password
CLICKHOUSE_TIMEOUT=30000
CLICKHOUSE_RATE_LIMIT_PER_MIN=1000
CLICKHOUSE_SLOW_QUERY_MS=5000

# =============================================================================
# AI INTEGRATION (OpenAI)
# =============================================================================

# Tests mock OpenAI; keys not used at runtime
OPENAI_API_KEY=sk-test-mock
OPENAI_ORG_ID=org-test
OPENAI_SQL_MODEL=gpt-4
OPENAI_CHART_MODEL=gpt-3.5-turbo
OPENAI_TIMEOUT=30000
OPENAI_MAX_RETRIES=2
OPENAI_RATE_LIMIT_PER_MIN=60
OPENAI_SLOW_THRESHOLD_MS=5000
OPENAI_TOKENS_WARN_THRESHOLD=1000

# =============================================================================
# INTEGRATIONS & SERVICES
# =============================================================================

# Intercom Customer Support (tests mock)
NEXT_PUBLIC_INTERCOM_APP_ID=test_app_id
INTERCOM_API_KEY=test_api_key

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# Optional API key for rate limiting and authentication
API_KEY=corso_test_key

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

CORS_ORIGINS=*

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry Error Tracking (tests mock)
SENTRY_DSN=https://test_sentry_dsn
NEXT_PUBLIC_SENTRY_DSN=https://test_public_sentry_dsn
SENTRY_ORG=test_org
SENTRY_PROJECT=test_project

# =============================================================================
# CACHING & SESSIONS (Redis)
# =============================================================================

# Upstash Redis Configuration (tests mock)
UPSTASH_REDIS_REST_URL=https://test-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=test_redis_token

# =============================================================================
# SECURITY & COMPLIANCE
# =============================================================================

# Content Security Policy
CSP_SCRIPT_DOMAINS='self',js.stripe.com,js.clerk.dev
CSP_STYLE_DOMAINS='self',fonts.googleapis.com
CSP_FONT_DOMAINS='self',fonts.gstatic.com
CSP_IMG_DOMAINS='self',images.clerk.dev,js.stripe.com,example.supabase.co
CSP_CONNECT_DOMAINS='self',api.openai.com,api.stripe.com
CSP_FRAME_DOMAINS='self',js.stripe.com,accounts.clerk.dev
CSP_REPORT_URI=/api/public/csp-report
CSP_REPORT_ONLY=true

# Cloudflare Turnstile (Bot Protection) - tests mock
NEXT_PUBLIC_TURNSTILE_SITE_KEY=test_turnstile_site_key
TURNSTILE_SECRET_KEY=test_turnstile_secret_key

# External SSO Configuration
ENABLE_EXTERNAL_SSO=false

# =============================================================================
# CONTENT & ASSETS
# =============================================================================

NEXT_PUBLIC_PLACEHOLDER_IMAGE_BASE=https://via.placeholder.com

# =============================================================================
# PERFORMANCE & OPTIMIZATION
# =============================================================================

AUTH_IDLE_TIMEOUT_MIN=30
PG_STAT_TOP_N=10

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

VERCEL_ENV=test
NEXT_TELEMETRY_DISABLED=1
NEXT_PUBLIC_ONBOARDING_PREVIEW=1
npm_package_version=0.1.0


# CSP & Logging Controls
CSP_DEBUG_HEADERS=false
CSP_REPORT_LOG=false
CSP_REPORT_MAX_LOGS=0
LOG_LEVEL=info

# =============================================================================
# AG GRID ENTERPRISE
# =============================================================================

# Set to '1' to enable AG Grid Enterprise (required for server-side row model)
NEXT_PUBLIC_AGGRID_ENTERPRISE=1
# AG Grid license key (removes watermark in production) - canonical name
NEXT_PUBLIC_AGGRID_LICENSE_KEY=Using_this_{AG_Charts_and_AG_Grid}_Enterprise_key_{AG-072861}_in_excess_of_the_licence_granted_is_not_permitted___Please_report_misuse_to_legal@ag-grid.com___For_help_with_changing_this_key_please_contact_info@ag-grid.com___{Corso,_Inc.}_is_granted_a_{Single_Application}_Developer_License_for_the_application_{discover.getcorso.com}_only_for_{1}_Front-End_JavaScript_developer___All_Front-End_JavaScript_developers_working_on_{discover.getcorso.com}_need_to_be_licensed___{discover.getcorso.com}_has_been_granted_a_Deployment_License_Add-on_for_{1}_Production_Environment___This_key_works_with_{AG_Charts_and_AG_Grid}_Enterprise_versions_released_before_{3_January_2026}____[v3]_[0102]_MTc2NzM5ODQwMDAwMA==b03396a136ab260b64e40525000d37d6

# Legacy environment variable names (for backward compatibility)
NEXT_PUBLIC_AG_GRID_ENTERPRISE=1
NEXT_PUBLIC_AG_GRID_LICENSE_KEY=Using_this_{AG_Charts_and_AG_Grid}_Enterprise_key_{AG-072861}_in_excess_of_the_licence_granted_is_not_permitted___Please_report_misuse_to_legal@ag-grid.com___For_help_with_changing_this_key_please_contact_info@ag-grid.com___{Corso,_Inc.}_is_granted_a_{Single_Application}_Developer_License_for_the_application_{discover.getcorso.com}_only_for_{1}_Front-End_JavaScript_developer___All_Front-End_JavaScript_developers_working_on_{discover.getcorso.com}_need_to_be_licensed___{discover.getcorso.com}_has_been_granted_a_Deployment_License_Add-on_for_{1}_Production_Environment___This_key_works_with_{AG_Charts_and_AG_Grid}_Enterprise_versions_released_before_{3_January_2026}____[v3]_[0102]_MTc2NzM5ODQwMDAwMA==b03396a136ab260b64e40525000d37d6

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# Optional API key for rate limiting and authentication
API_KEY=corso_test_key

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

CORS_ORIGINS=*

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Mock Database Mode (Development/Testing)
# Tests use mock data by default (uses JSON files from public/__mockdb__/)
# CORSO_USE_MOCK_DB=true
# NEXT_PUBLIC_USE_MOCK_DB=true

# Mock CMS Mode (Testing)
# Set to 'true' to use mock CMS JSON fixtures instead of real CMS or markdown files
# Mock content is read from checked-in JSON fixtures in public/__mockcms__/
# Enabled by default in test environment
CORSO_USE_MOCK_CMS=true

# CMS Provider Configuration
# Select CMS provider when not using mock CMS
# Options: 'legacy' (markdown/static), 'directus'
# Default: 'legacy'
# CORSO_CMS_PROVIDER=legacy

# Directus CMS Configuration (only used if CORSO_CMS_PROVIDER=directus)
# Tests mock Directus; values not used at runtime
# DIRECTUS_URL=https://example.directus.com
# DIRECTUS_TOKEN=test_directus_token

# Optional logging endpoint (can be omitted)
# LOGGING_ENDPOINT=https://your-logging-service.com/api/logs
