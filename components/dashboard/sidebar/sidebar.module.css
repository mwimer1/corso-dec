/* Component-scoped sidebar styles (CSS Module) */
.root {
  display: flex;
  flex-direction: column;
  min-height: 0;
  border-right: 1px solid var(--sb-border);
  box-shadow: 1px 0 3px rgba(0,0,0,0.03);
  position: relative;
  overflow-x: hidden;
  /* Add consistent background */
  background: var(--sb-bg);
}

/* Updated nav with consistent padding */
.nav {
  flex: 1;
  overflow-y: auto;
  /* Match horizontal padding with top and footer */
  padding: 0.5rem 0.75rem;
}

/* Ensure consistent item height and padding */
.item {
  height: var(--sb-item-h);
  border-radius: var(--sb-radius);
  color: var(--sb-ink);
  /* Consistent horizontal padding */
  padding: 0 0.75rem;
  display: flex;
  align-items: center;
  margin-bottom: 0.25rem; /* Add slight gap between items */
  transition: all 150ms ease;
}

/* Enhanced hover state */
.item:hover {
  background: rgba(0, 0, 0, 0.03);
}

/* Active state with stronger visual indicator */
.itemActive {
  background: rgba(9, 122, 255, 0.1);
  color: var(--sb-ink-active);
  border-left: 3px solid var(--sb-ink-active);
  padding-left: calc(0.75rem - 3px); /* Adjust for border */
}

/* Preserve bright blue active stroke on icons */
.itemActive .icon,
[data-active="true"] .icon {
  color: var(--sb-icon-active);
}
.itemActive .icon :where(svg, path),
[data-active="true"] .icon :where(svg, path) {
  stroke: var(--sb-icon-active);
  color: var(--sb-icon-active);
  fill: none;
}

/* Updated footer styling */
.footer {
  /* Match top bar height exactly */
  min-height: 3.5rem;
  display: flex;
  align-items: center;
  border-top: 1px solid var(--sb-border);
  background: var(--sb-footer-bg, var(--sb-bg));
  /* Remove padding - handled by inner content */
  padding: 0;
}

/* Remove footerInner - consolidate into userProfile */
.footerInner {
  display: none; /* Deprecate in favor of userProfile */
}

/* New user profile styles */
.userProfile {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem; /* Match nav container pattern for consistent spacing */
  width: 100%;
  min-height: 3.5rem;
  transition: all 150ms ease;
}

.userProfileCollapsed {
  justify-content: center;
  padding: 0.75rem 0.5rem;
}

.userAvatar {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Avatar sizing that matches nav icons */
.avatarBox {
  border-radius: 50%;
  overflow: hidden;
  transition: all 150ms ease;
}

.avatarBoxExpanded {
  width: 2rem; /* 32px - matches icon size */
  height: 2rem;
}

.avatarBoxCollapsed {
  width: 1.75rem; /* 28px - slightly smaller when collapsed */
  height: 1.75rem;
}

.avatarTrigger {
  padding: 0;
  margin: 0;
  border: 2px solid transparent;
  border-radius: 50%;
  transition: border-color 150ms ease;
}

.avatarTrigger:hover {
  border-color: var(--sb-border-hover, rgba(0, 0, 0, 0.1));
}

.userInfo {
  min-width: 0;
  flex: 1;
}

.userName {
  font-size: 0.875rem; /* 14px */
  font-weight: 500;
  line-height: 1.25rem;
  color: var(--sb-ink);
  truncate: true;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.userPlan {
  font-size: 0.75rem; /* 12px */
  line-height: 1rem;
  color: var(--sb-ink-muted, rgba(0, 0, 0, 0.6));
  truncate: true;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Top bar with consistent padding */
.top {
  border-bottom: 1px solid var(--sb-border);
  padding: 0.75rem;
  min-height: 3.5rem;
  display: flex;
  align-items: center;
}

/* Icon sizing consistency */
.icon {
  width: var(--sb-icon-size, 1.25rem);
  height: var(--sb-icon-size, 1.25rem);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* Collapsed state adjustments */
[data-collapsed="true"] .item {
  padding: 0 0.5rem;
  justify-content: center;
  border-left: none; /* Remove border in collapsed state */
}

[data-collapsed="true"] .itemActive {
  padding: 0 0.5rem; /* Maintain centered alignment */
}

/* Expanded: explicitly size root to sb-width-expanded (authoritative) */
.expanded {
  width: var(--sb-width-expanded);
  min-inline-size: var(--sb-width-expanded);
}

/* Responsive cap to avoid overflow on small viewports */
@media (max-width: 640px) {
  .expanded {
    width: min(var(--sb-width-expanded), 92vw);
    min-inline-size: min(var(--sb-width-expanded), 92vw);
  }
}

.icon :where(svg) {
  width: 100%;
  height: 100%;
}

/* Tooltip layer that sits under the sidebar root to portal tooltips */
.sb-tooltip-layer {
  position: absolute;
  inset: 0;
  overflow: visible;
  pointer-events: none;
  /* Use a sane default if --sb-tip-z is not defined */
  z-index: var(--sb-tip-z, 60);
}

/* Removed the previous `.root, .root * { overflow-y: visible }` override which
   caused the sidebar nav to lose its internal scrolling. The tooltip layer above
   allows portal content to overflow without affecting the nav's scroll behavior. */

/* Show tooltip layer only when collapsed */
.root[data-collapsed="true"] .sb-tooltip-layer { display: block; }
.root[data-collapsed="false"] .sb-tooltip-layer { display: none; }

/* Trigger wrapper for tooltip measurement */
.tipTrigger {
  position: relative;
  display: inline-flex;
}

/* Tooltip styles (scoped) */
.tipWrap {
  position: relative;
  display: inline-flex;
}

.tooltip {
  position: absolute; /* positioned inside portal layer */
  top: 0; /* top coordinated via inline style from trigger center */
  transform: translateY(-50%);
  white-space: nowrap;
  font-family: var(--sb-tip-font);
  font-size: var(--sb-tip-size);
  line-height: var(--sb-tip-line);
  color: var(--sb-tip-fg);
  background: var(--sb-tip-bg);
  border-radius: var(--sb-tip-radius);
  padding: var(--sb-tip-pad-y) var(--sb-tip-pad-x);
  box-shadow: var(--sb-tip-shadow);
  z-index: var(--sb-tip-z);
  pointer-events: none;
  opacity: 1;
  transform-origin: left center;
  transition: opacity 120ms ease, transform 120ms ease;
}

/* open state is controlled by render via portal, no data-open toggle needed */

/* Only show tooltips when sidebar is collapsed */
/* Tooltip visibility handled by portal mounting; keep defaults permissive */

.tipWrap[data-side="left"] .tooltip {
  inset-inline-start: auto;
  inset-inline-end: calc(100% + var(--sb-tip-gap));
}
.tipWrap[data-side="left"] .tooltip[data-open="true"] {
  transform: translateY(-50%) translateX(-2px);
}

.tooltipArrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  width: 8px;
  height: 8px;
  background: var(--sb-tip-bg);
  box-shadow: var(--sb-tip-shadow);
  inset-inline-start: -4px;
}
.tipWrap[data-side="left"] .tooltipArrow {
  inset-inline-start: auto;
  inset-inline-end: -4px;
}

@media (prefers-reduced-motion: reduce) {
  .tooltip { transition: none; }
}


