---
status: "draft"
last_updated: "2025-12-15"
category: "documentation"
---
# Orphan Pruning – Follow-ups (2025-10-09)

This file tracks infra/test-only modules that are safe to delete once the referencing tests/tooling are adjusted.

> Scope: Items below are **not used by runtime app code**, but are referenced by runtime-boundary tests, barrel integrity tests, or maintenance/audit tooling.

## Candidates

- ~~`components/dashboard/entity/shared/renderers/index.ts`~~ ✅ **Already removed** (2025-12-14)
  - Status: File does not exist. Already cleaned up.
  - Action: None needed.

- `components/dashboard/server.ts`
  - Referenced by: `tests/runtime-boundary/boundaries/dashboard.server-barrel.test.ts`,
    `scripts/rules/ast-grep/dashboard/no-client-import-server-barrel.yml`
  - TODO: Decide whether to keep the server barrel or drop both the barrel and its enforcement rules/tests.

- `components/index.ts` ⚠️ **KEEP** - Not deprecated
  - Status: Actively enforced by linting rules (`sgconfig.yml`) as part of design system architecture.
  - Listed in `scripts/audit/orphans.allowlist.json` - intentionally kept.
  - Action: **Do not remove** - this is an architectural component.

- ~~`components/insights/constants/index.ts`~~ ✅ **Does not exist**
- ~~`components/insights/widgets/index.ts`~~ ✅ **Does not exist**
  - Status: These barrels never existed. Insights uses direct files (`constants.ts`, individual widget files).
  - Action: None needed - already using correct pattern.

- ~~`lib/api/server/index.ts`~~ ✅ **Does not exist** (already removed)
- ~~`lib/auth/index.ts`~~ ✅ **Removed** (2025-12-14) - No production usage found
- ~~`lib/config/index.ts`~~ ✅ **Does not exist** (already removed)
- `lib/core/index.ts` ⚠️ **KEEP** - Client-safe architectural component, actively used
- ~~`lib/marketing/index.ts`~~ ✅ **Removed** (2025-12-14) - Production code uses `/client` and `/server` directly

- `lib/server/config/env.ts` *(removed in orphan cleanup)*
- `lib/server/config/index.ts`
- `lib/server/dashboard/index.ts`
- `lib/server/errors/index.ts`
- `lib/server/security/index.ts`
  - Referenced by: boundary/integrity tests.
  - TODO: Align boundary tests if these server barrels are dropped.

- ~~`lib/monitoring/sentry/capture.ts`~~ ✅ **Already removed** (2025-12-14)
- ~~`lib/monitoring/sentry/init-client.ts`~~ ✅ **Already removed** (2025-12-14)
- ~~`lib/monitoring/sentry/init.ts`~~ ✅ **Already removed** (2025-12-14)
  - Status: Files do not exist. Already cleaned up.
  - Action: None needed.

- `lib/monitoring/utils/sanitize.ts` *(removed in orphan cleanup)*
- `lib/security/guards/config-aware.ts` *(removed in orphan cleanup)*

<!-- removed in PR: styles/ui/shared/component-variants.ts -->

- `types/api/openapi.d.ts`
  - Used by OpenAPI docs/tooling.
  - TODO: Keep if OpenAPI generation remains; otherwise prune with tooling.

## Process

1) For any item above you choose to remove:
   - Delete the file.
   - Update or delete the specific tests/rules/allowlists listed with it.
2) Run local gates:
   - `pnpm -w typecheck && pnpm -w lint && pnpm -w test && pnpm -w build`
3) Commit with Conventional Commit:
   - `chore: prune infra-only barrels and adjust tests`

> This document exists to avoid churn in PR discussions. Once all follow-ups are complete, delete this file.
