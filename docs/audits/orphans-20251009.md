---
title: "Audits"
description: ">-"
last_updated: "2025-12-14"
category: "documentation"
status: "draft"
---
# Orphan Pruning â€“ Follow-ups (2025-10-09)

This file tracks infra/test-only modules that are safe to delete once the referencing tests/tooling are adjusted.

> Scope: Items below are **not used by runtime app code**, but are referenced by runtime-boundary tests, barrel integrity tests, or maintenance/audit tooling.

## Candidates

- `components/dashboard/entity/shared/renderers/index.ts`
  - Referenced by: `tests/runtime-boundary/entity-shared-renderers-imports.test.ts`
  - TODO: If we remove this barrel, delete/adjust the test accordingly.

- `components/dashboard/server.ts`
  - Referenced by: `tests/runtime-boundary/boundaries/dashboard.server-barrel.test.ts`,
    `scripts/rules/ast-grep/dashboard/no-client-import-server-barrel.yml`
  - TODO: Decide whether to keep the server barrel or drop both the barrel and its enforcement rules/tests.

- `components/index.ts`
  - Referenced by: orphan tooling/allowlists.
  - TODO: If we remove it, update or delete allowlists under `scripts/audit/**`.

- `components/insights/constants/index.ts`
- `components/insights/widgets/index.ts`
  - Note: the Insights feature is in use; these **barrels** are not.
  - TODO: If removed, ensure all Insights imports are direct (no broken barrel imports).

- `lib/api/server/index.ts`
- `lib/auth/index.ts`
- `lib/config/index.ts`
- `lib/core/index.ts`
- `lib/marketing/index.ts`
  - Referenced by: barrel integrity tests.
  - TODO: If you remove any, also prune/adjust `tests/lib/barrels.integrity*.test.ts`.

- `lib/server/config/env.ts` *(removed in orphan cleanup)*
- `lib/server/config/index.ts`
- `lib/server/dashboard/index.ts`
- `lib/server/errors/index.ts`
- `lib/server/security/index.ts`
  - Referenced by: boundary/integrity tests.
  - TODO: Align boundary tests if these server barrels are dropped.

- `lib/monitoring/sentry/capture.ts`
- `lib/monitoring/sentry/init-client.ts`
- `lib/monitoring/sentry/init.ts`
  - Current app paths prefer `instrumentation.ts` and `lib/monitoring/index.ts`.
  - TODO: If removing, prune any re-exports and update monitoring tests/tooling.

- `lib/monitoring/utils/sanitize.ts` *(removed in orphan cleanup)*
- `lib/security/guards/config-aware.ts` *(removed in orphan cleanup)*

<!-- removed in PR: styles/ui/shared/component-variants.ts -->

- `types/api/openapi.d.ts`
  - Used by OpenAPI docs/tooling.
  - TODO: Keep if OpenAPI generation remains; otherwise prune with tooling.

## Process

1) For any item above you choose to remove:
   - Delete the file.
   - Update or delete the specific tests/rules/allowlists listed with it.
2) Run local gates:
   - `pnpm -w typecheck && pnpm -w lint && pnpm -w test && pnpm -w build`
3) Commit with Conventional Commit:
   - `chore: prune infra-only barrels and adjust tests`

> This document exists to avoid churn in PR discussions. Once all follow-ups are complete, delete this file.
