---
title: Audits
description: >-
  Documentation and resources for documentation functionality. Located in
  audits/.
last_updated: '2025-12-30'
category: documentation
status: draft
---
# Orphans Context Audit (2025-10-09)

| Candidate Path | Non-Test Dependents | Test-Only? | Boundary OK | Generators/Indexes Coupling | Risk | Exit Criteria Met? | Notes |
|---|---:|:---:|:---:|:---:|:--:|:---:|---|
| components/index.ts | 0 | ✅ | ✅ | Lint/codemod refs only | Low | ✅ | Found only in `eslint.config.mjs` and codemod scripts; no code imports. |
| components/dashboard/entity/shared/renderers/index.ts | 0 | ✅ | ✅ | None | Low | ✅ | Only referenced in READMEs; no code dependents via madge. |
| components/insights/constants/index.ts | 2 | ❌ | ✅ | None | Med | ❌ | Used by `components/insights/sections/insight-detail.tsx` and `components/insights/widgets/article.tsx`. |
| components/insights/widgets/index.ts | 3 | ❌ | ✅ | None | Med | ❌ | Used by insights components/tests; requires import rewrites if removed. |
| lib/api/server/index.ts | many (docs/tests) | ❌ | ✅ | tsconfig alias, vitest alias | Med | ❌ | Node-only barrel is used; consider consolidation plan before removal. |
| lib/auth/index.ts | many | ❌ | ✅ | tsconfig and vitest alias | Med | ❌ | Public barrel in active use across app/tests. |
| lib/config/index.ts | many | ❌ | ✅ | tsconfig alias | Med | ❌ | In active use across docs/tests and code. |
| lib/core/index.ts | many | ❌ | ✅ | docs/tests | Med | ❌ | Public client-safe barrel; do not remove without plan. |
| lib/marketing/index.ts | many | ❌ | ✅ | tsconfig, docs | Med | ❌ | Used widely across marketing pages and tests. |
| lib/server/config/index.ts | some | ❌ | ✅ | Node-only server barrel | Med | ❌ | Referenced by shared docs and one guard file; verify true runtime usage. |
| lib/server/dashboard/index.ts | some | ❌ | ✅ | Vitest alias and tests | Med | ❌ | Server barrel used by server pages/tests; cannot remove yet. |
| lib/server/errors/index.ts | some | ❌ | ✅ | Middleware uses subpaths | Med | ❌ | Barrel referenced indirectly; removal would require import rewrites. |
| lib/server/security/index.ts | minimal | ✅ | ✅ | Commented guidance only | Low | ✅ | No concrete imports found; confirm no hidden consumers before removal. |
| lib/monitoring/sentry/(init\|init-client\|capture).ts | minimal | ✅ | ✅ | Docs mention; no code imports found | Low | ✅ | Safe to prune or consolidate if not referenced by instrumentation. |
| styles/ui/shared/component-variants.ts | 1 (styles utils) | ❌ | ✅ | Generated by scripts | Med | ❌ | Referenced by `styles/utils/README.md`; also target of maintenance scripts; consider keep/generate. |
| types/api/openapi.d.ts | 0 direct imports | ✅ | ✅ | Generated by `openapi:types` | Low | ✅ | Managed artifact; keep until generators are updated to not emit. |

## Evidence (selected)
- components/index.ts
  - grep: eslint.config.mjs: '@/components/index', scripts/codemods/fix-intradomain-barrels.ts
  - no code imports located via grep
- components/dashboard/entity/shared/renderers/index.ts
  - madge graph shows file present; no dependents in dependencies graph; README mentions only
- insights constants/widgets
  - grep constants: used by `components/insights/sections/insight-detail.tsx`, `components/insights/widgets/article.tsx`
  - grep widgets: used by multiple insights components/tests
- lib/api/server
  - active across README/docs and tests; tsconfig/aliases map path; suggest keep
- lib/server/* barrels
  - dashboard: tests and vitest.config alias; keep
  - errors: middleware imports subpaths; barrel present; further audit needed for removal
- sentry
  - grep '@/lib/monitoring/sentry' shows only docs and guidance; no runtime imports detected
- styles component-variants
  - referenced by docs and styles utils; generated by scripts; treat as generated artifact rather than orphan
- openapi.d.ts
  - referenced as generated artifact by scripts/docs; keep until openapi workflow is changed

## PR Staging Plan
- PR #1 (Low risk):
  - Remove `components/index.ts` if not required by tooling (update eslint/codemods references), or leave and mark internal-only.
  - Confirm `types/api/openapi.d.ts` remains generated; no removal in this PR.
  - If Sentry files unused at runtime, consolidate/remove with a brief note.
- PR #2 (Insights cleanups):
  - Replace imports of `@/components/insights/constants` and `@/components/insights/widgets/*` with direct paths or a maintained barrel; remove unused barrels afterwards.
- PR #3 (Server barrels review):
  - Inventory actual runtime imports to `@/lib/server/{dashboard,errors,config,security}`; if barrels only proxy subpaths, replace imports with concrete modules and remove barrels.
- PR #4 (Style variants):
  - Treat `styles/ui/shared/component-variants.ts` as generated; either keep and document or move under a generated-artifacts section. Remove only if scripts updated accordingly.

## Exit Criteria Summary
- No non-test dependents remain for each removed file.
- Boundary safety verified (no Edge/client importing server-only).
- Generators and aliases updated; CI passing (typecheck, lint, tests).
