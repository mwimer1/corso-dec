###############################################################################
# Supabase local-dev configuration – updated 2025-05-02
###############################################################################

project_id = "cveccfuirljazydweuvv"

# ───────────────────────────── API (PostgREST) ──────────────────────────────
[api]
enabled           = true
port              = 55421                 # free port for PostgREST admin probe
schemas           = ["public", "storage", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows          = 1000

# ────────────────────────────── PostgreSQL ──────────────────────────────────
[db]
port          = 55432                     # local Postgres
shadow_port   = 55430                     # shadow DB for migrations
major_version = 15

[db.pooler]
enabled           = false
port              = 54329
pool_mode         = "transaction"
default_pool_size = 20
max_client_conn   = 100

# ────────────────────────────── Realtime ────────────────────────────────────
[realtime]
enabled    = true
ip_version = "IPv4"

# ─────────────────────────── Supabase Studio ────────────────────────────────
[studio]
enabled = true
port    = 54323
api_url = "http://localhost"

# ───────────────────────────── Inbucket ─────────────────────────────────────
[inbucket]
enabled   = true
port      = 54324
smtp_port = 54325
pop3_port = 54326

# ───────────────────────────── Storage ──────────────────────────────────────
[storage]
enabled         = true
file_size_limit = "50MiB"

# ───────────────────────── Edge Runtime (optional) ──────────────────────────
[edge_runtime]
enabled        = false
policy         = "oneshot"
inspector_port = 8083

# ─────────────────────────── Analytics / Vector ─────────────────────────────
[analytics]
enabled     = false
port        = 54327
vector_port = 54328
backend     = "postgres"

# ────────────────────────────────── Auth ────────────────────────────────────
[auth]
enabled                       = true
site_url                      = "http://localhost:3000"
additional_redirect_urls      = []
jwt_expiry                    = 3600
enable_refresh_token_rotation = true
refresh_token_reuse_interval  = 10
enable_manual_linking         = true
enable_sign-up                 = true
enable_anonymous_sign_ins     = true
minimum_password_length       = 6
password_requirements         = ""
jwt_secret                    = "REPLACE_WITH_32_CHAR_RANDOM_VALUE"

# external providers disabled for local dev
[auth.external.apple]
enabled = false
[auth.external.google]
enabled = false
[auth.external.github]
enabled = false
[auth.external.azure]
enabled = false
[auth.external.twitter]
enabled = false
[auth.external.discord]
enabled = false

# MFA settings
[auth.mfa]
max_enrolled_factors = 10
[auth.mfa.totp]
enroll_enabled = true
verify_enabled = true
[auth.mfa.phone]
enroll_enabled = false
verify_enabled = false

# email / magic-link settings
[auth.email]
enable_sign-up          = true
double_confirm_changes = true
enable_confirmations   = true
secure_password_change = false
max_frequency          = "1m0s"
otp_length             = 6
otp_expiry             = 86400
[auth.email.template]

# SMS (all providers off)
[auth.sms]
enable_sign-up = false
template      = ""
[auth.sms.twilio]
account_sid         = ""
auth_token          = ""
message_service_sid = ""
[auth.sms.messagebird]
access_key = ""
originator = ""
[auth.sms.textlocal]
api_key = ""
sender  = ""
[auth.sms.vonage]
api_key    = ""
api_secret = ""
from       = ""
[auth.sms.test_otp]
enabled  = false
template = ""

###############################################################################
# Remote pooler connection (informational)
#   postgresql://postgres.cveccfuirljazydweuvv:[PASSWORD]@
#   aws-0-us-east-1.pooler.supabase.com:6543/postgres
###############################################################################
