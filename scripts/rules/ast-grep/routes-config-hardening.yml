id: routes-config-hardening
language: ts
severity: error
rule:
  any:
    - pattern: "export const runtime = $X as const"
      message: "Do not use `as const` on runtime exports."
    - pattern: "export const dynamic = $X as const"
      message: "Do not use `as const` on dynamic exports."
    - pattern: "export const revalidate = $X as const"
      message: "Do not use `as const` on revalidate exports."
    - pattern: "export const preferredRegion = $X as const"
      message: "Do not use `as const` on preferredRegion exports."
    - pattern: "export const fetchCache = $X as const"
      message: "Do not use `as const` on fetchCache exports."
    - pattern: "export const maxDuration = $X as const"
      message: "Do not use `as const` on maxDuration exports."
    - pattern: "export const config = $CONFIG"
      message: "Do not export legacy route `config` in App Router. Use named exports (runtime/dynamic/revalidate/etc.)."
paths:
  include:
    - "app/**/route.ts"
    - "app/**/page.tsx"

