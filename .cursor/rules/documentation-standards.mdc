---
rule_id: documentation-standards
title: Documentation Standards & References (Consolidated)
owners:
  - docs@corso.io
  - platform@corso.io
last_reviewed: "2025-12-15"
status: active
domains: [docs]
enforcement: warn
related_rules: []
alwaysApply: false
globs: ["docs/**", "**/README.md"]
summary: Documentation consistency standards with canonical references, consolidation, and maintenance guidelines.
# Reviewed in Dec 2025 - Updated to reflect current documentation consolidation and standards
---

# Documentation Standards & References (Consolidated)

**Comprehensive guide to documentation consistency, canonical references, and maintenance standards for the Corso platform.**

## TL;DR
- **Consolidation**: Prefer single authoritative READMEs at domain roots
- **Canonical References**: Use official Next.js docs via `docs/indexing/sources/nextjs-urls.json`
- **Consistency**: Standard sections and templates across all documentation
- **Maintenance**: Keep docs aligned with current code (no stale placeholders)
- **Reusability**: Reference shared examples from `_snippets.mdc` instead of duplicating

## ðŸ“š Documentation Structure & Consolidation

### Domain Documentation Policy
- **Marketing**: `app/(marketing)/README.md` consolidates pricing, contact, insights, and legal
- **Marketing Theming**: Primary details in `app/(marketing)/README.md` and `app/README.md`
- **API**: `app/api/README.md` is the primary API reference (consolidates `v1`, `user`, `test`)
- **Dashboard Entities**: Authoritative docs live in `app/(protected)/dashboard/(entities)/README.md` and reflect a single dynamic route `[entity]` covering `addresses`, `companies`, and `projects` (Projects: fully implemented; Companies/Addresses: server-configured, client-side pending)
- **Dashboard Chat**: Consolidated under dashboard domain with API at `/api/v1/ai/chat` and components in `components/dashboard/chat/`

### README Templates

#### Domain README Template
```markdown
# [Domain] README

## Overview
Brief description of the domain's purpose and scope.

## Routes / Usage
Documentation of routes, endpoints, and usage patterns.

## Components (if applicable)
Component documentation and usage examples.

## Security & Rate Limiting (if applicable)
Security considerations and rate limiting policies.

## Testing / Local Dev
How to test and develop locally.

## Related
Links to related documentation and resources.
```

#### Subsection README Template
```markdown
# [Subsection]
This documentation is consolidated in the parent domain README.
See: ../../README.md
```

#### Docs Directory README Template
For READMEs in the `docs/` directory, use this standardized template:

```markdown
---
title: "[Section Name]"
last_updated: "YYYY-MM-DD"
category: "documentation"
status: "active"
description: "Brief description of the section's purpose and contents."
---

# [Section Name]

Last updated: YYYY-MM-DD

[Overview paragraph describing the section's purpose and scope]

## ðŸ“š Documentation

- [Document Title](filename.md) - Brief description
- [Another Document](another.md) - Brief description

## ðŸ”— Related Documentation

- [Related Section](../related-section/) - Description
- [Architecture Overview](../architecture/architecture-overview.md) - Description

---

**See Also**: [Documentation Index](../README.md)
```

### README Requirements for `docs/` Directory

#### When README is Required
- **Directory has 2+ documentation files**: Must have a README indexing all files
- **Directory has subdirectories with content**: Must have a README explaining structure
- **Directory serves as navigation hub**: Must have a README for discoverability

#### When README is NOT Required
- **Single-file directory**: Directories with only one `.md` file don't need a README
- **Leaf node with no organizational purpose**: If the directory doesn't organize multiple files, no README needed

#### README Quality Standards
All READMEs in `docs/` must:
- âœ… Include frontmatter with `title`, `description`, `last_updated`, `category`, `status`
- âœ… Include overview/purpose section explaining the directory's contents
- âœ… List and link to all documentation files in the directory
- âœ… Link back to parent index (`../README.md` or `../../README.md` as appropriate)
- âœ… Include "Related Documentation" section linking to related sections
- âŒ Never be placeholder-only (must have actual content)
- âŒ Never be the only file in a directory (violates policy)

#### Policy Violations
- **Single-file README**: A directory containing only a README.md with no other files violates policy
  - **Resolution**: Either add actual documentation files, remove the README, or consolidate with parent directory

## ðŸ”— Canonical References

### Next.js Documentation
Prefer official, versionless Next.js App Router docs. If a local index exists, reference it; otherwise link directly to nextjs.org.

#### Usage Guidelines
- Use these links when citing or searching Next.js features (App Router, runtimes, caching, middleware, streaming, Link/Image, redirects, codemods, instrumentation, ESLint)
- Use Vercel docs only when Next.js defers (OTel, function duration)

#### Example References
```text
app-router: https://nextjs.org/docs/app
runtimes: https://nextjs.org/docs/app/building-your-application/deploying/runtime
middleware: https://nextjs.org/docs/app/building-your-application/routing/middleware
streaming: https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming
```

## ðŸ“ Content Standards

### Consistency Requirements
- Use consistent sections where applicable: Overview, Routes/Usage, Components, Security, Testing, Related
- Keep docs aligned with current code (no stale placeholders)
- Prefer a single authoritative `README.md` at the domain root; subfolders may link to the parent instead of duplicating

### Reusability via Canonical Snippets
- Prefer referencing shared examples from `_snippets.mdc` instead of duplicating code blocks across multiple docs
- When content must appear in multiple places, link to the single source of truth rather than copying
- Use current component structure references: auth/, billing/, dashboard/, forms/, landing/, marketing/, onboarding/, ui/

### Import Boundaries Documentation
- Reflect import boundaries in domain docs: inside `components/**`, note that root barrels (`@/components`, `@/components/ui`) are forbidden; consumers outside may use barrels

## ðŸ› ï¸ Documentation Maintenance

### Verification Commands

These commands can be run locally before pushing. CI automatically runs these checks on every PR:

```bash
# Comprehensive documentation validation
pnpm docs:validate

# Markdown linting (runs in CI)
pnpm lint:md

# Documentation linting (alias for lint:md)
pnpm docs:lint

# Spell checking (runs in CI, non-blocking)
pnpm docs:spellcheck

# README freshness checks
pnpm docs:readmes:check

# Documentation freshness check (runs monthly in CI)
pnpm docs:stale:check --maxAgeDays=90

# Duplication detection (runs in CI)
pnpm jscpd:docs

# Link validation
pnpm docs:check

# URL accessibility validation
pnpm docs:urls:validate
```

**CI Integration**: All checks marked "runs in CI" are automatically executed by `.github/workflows/pr-checks.yml` when documentation files change.

### File-Scoped Validation
For single-file iterations, prefer file-scoped checks:
```bash
# Lint specific file
pnpm exec eslint path/to/file.{ts,tsx}

# Format specific file
pnpm exec prettier --write path/to/file

# Check specific documentation
pnpm docs:validate --file path/to/README.md
```

### Documentation Freshness
- Check for stale documentation (>90 days old)
- Update `last_updated` timestamps in frontmatter
- Ensure examples reflect current code patterns
- Validate that links point to existing resources

## ðŸ“Š Documentation Metrics

### Quality Indicators
- **Freshness**: Documentation updated within 90 days
- **Link Integrity**: All internal links resolve correctly
- **Consistency**: Standard sections and templates used
- **Accuracy**: Examples match current code patterns
- **Completeness**: All public APIs documented

### Maintenance Scripts
```bash
# Generate documentation metrics
pnpm docs:metrics

# Check for stale documentation
pnpm docs:stale-check

# Validate documentation structure
pnpm docs:structure-check

# Generate documentation index
pnpm docs:index
```

## ðŸŽ¯ Best Practices

### Content Guidelines
- **Concise**: Keep documentation focused and to the point
- **Accurate**: Ensure examples work with current code
- **Complete**: Document all public interfaces
- **Consistent**: Use standard templates and sections
- **Maintainable**: Link to single sources of truth

### Cross-References
- Use relative links for internal documentation
- Link to canonical Next.js docs for framework features
- Reference `_snippets.mdc` for reusable code examples
- Maintain consistent link formatting

### Version Control
- Update documentation with code changes
- Use conventional commit messages for doc updates
- Include documentation in PR reviews
- Maintain changelog for breaking changes

## Enforcement

### CI Automation

Documentation quality is automatically enforced via CI workflows:

- **Markdownlint**: Runs on every PR via `.github/workflows/pr-checks.yml`
  - Validates markdown structure, formatting, and consistency
  - Catches issues like broken code fences, inconsistent formatting
  - Command: `pnpm lint:md`

- **Link Checking**: Validates all links in documentation via Lychee
  - Checks both internal and external links
  - Retries flaky external links automatically
  - Runs on every PR when docs files change

- **Duplication Detection**: Prevents copy-pasted content via jscpd
  - Threshold: 5% duplication (allows small quotes and common phrasing)
  - Blocks PRs if duplication exceeds threshold
  - Command: `pnpm jscpd:docs`

- **Freshness Checks**: Scheduled monthly workflow flags stale docs
  - Runs on 1st of each month via `.github/workflows/docs-freshness.yml`
  - Flags files older than 90 days
  - Creates GitHub issues for maintainers to review
  - Command: `pnpm docs:stale:check --maxAgeDays=90`

- **Spell Checking**: Non-blocking spell check via cspell
  - Runs on every PR but doesn't block merges
  - Surfaces typos for review without being overly strict
  - Command: `pnpm docs:spellcheck`

All checks are configured in `.github/workflows/pr-checks.yml` and run automatically on pull requests.

### Frontmatter Requirements

- **`docs/` directory**: All markdown files must include frontmatter with `title`, `description`, `last_updated`, `category`, and `status` fields
- **Root README.md**: Does NOT require frontmatter (exception to docs/ directory requirement)
- **CHANGELOG.md**: Does NOT require frontmatter (follows Keep a Changelog format)

### AST-Grep Rules
```yaml
# Detect stale documentation links
rule: |
  \[([^\]]+)\]\(([^)]+)\)
  where:
    regex: "^docs/"
    not inside: "<!-- skip-link-check -->"
```

### ESLint Integration (Planned)
The following ESLint rules are planned for future implementation:
- `@corso/docs-consistency`: Enforce documentation consistency
- `@corso/docs-freshness`: Check documentation freshness
- `@corso/docs-links`: Validate documentation links

**Note**: These rules are not yet implemented in `eslint-plugin-corso`. Enforcement is currently handled via CI automation (markdownlint, link checking, duplication detection, freshness checks) and code review.

```javascript
// Future .eslintrc.mjs configuration (when rules are implemented)
{
  rules: {
    '@corso/docs-consistency': 'error',
    '@corso/docs-freshness': 'warning',
    '@corso/docs-links': 'error'
  }
}
```

### Quality gates

See the canonical command set in
[ai-agent-development-environment.mdc](mdc:.cursor/rules/ai-agent-development-environment.mdc#quality-gates-and-validation-commands).

### Domain-Specific Documentation Commands
- **Development**: `pnpm docs:validate`
- **CI**: `pnpm docs:check && pnpm docs:urls:validate`
- **Freshness**: `pnpm docs:stale-check`
- **Structure**: `pnpm docs:structure-check`

## Windows-first tips

See the canonical guidance in
[ai-agent-development-environment.mdc](mdc:.cursor/rules/ai-agent-development-environment.mdc#windows-first-tips).

## Related Resources

- **Canonical Snippets**: `_snippets.mdc` for reusable code examples
- **Next.js URLs**: canonical Next.js docs (or local index if present)
- **Documentation Index**: `docs/index.ts` for navigation
- **Component Structure**: Current structure references in domain docs
