---
rule_id: dashboard-components
title: Dashboard Components — Chat & Tables (Consolidated)
owners:
  - platform@corso.io
last_reviewed: "2026-01-07"
status: active
domains: [components, dashboard, chat, tables]
enforcement: warn
related_rules:
  - component-design-system
  - runtime-boundaries
alwaysApply: false
globs: ["components/dashboard/**/*.tsx"]
summary: Dashboard component development patterns for chat interfaces and data tables with proper runtime boundaries.
---

# Dashboard Components — Chat & Tables (Consolidated)

**Comprehensive guide to dashboard component development, including chat interfaces and data tables with proper boundaries and guardrails.**

## Purpose
Define dashboard component development patterns for chat interfaces and data tables with proper runtime boundaries, client/server separation, and accessibility requirements.

## TL;DR
- **Client/Server Boundaries**: Respect runtime boundaries; no server-only imports in client components
- **Public Barrels**: Use `@/components/dashboard` (client) and `@/components/dashboard/server` (server)
- **Styling**: Token/variant-based only; no raw colors
- **Props**: Keep additions additive and optional (backward compatible)
- **Accessibility**: ARIA labels and semantic roles required
- **Validation**: Type-safe filters and SQL parameterization

## Component Scope

### Chat Components
- `components/dashboard/chat/chat-dock.tsx`, `components/dashboard/chat/chat-window.tsx`
- **API Endpoint**: `POST /api/v1/ai/chat` (streaming NDJSON chat processing)

### Table Components
- `components/dashboard/entities/**/*.tsx` - Entity grid components
- `lib/entities/**/*.ts` - Entity service layer

## Guardrails & Boundaries

### Client/Server Separation
- ✅ Client components use public barrels: `@/components/dashboard`, `@/lib/dashboard`
- ✅ Server components use service layer: `@/components/dashboard/entities`, `@/lib/entities`
- ❌ Server-only imports forbidden in client components

### Import Boundaries
- **Client**: `@/components/dashboard`, `@/lib/dashboard`
- **Server**: `@/components/dashboard/entities`, `@/lib/entities`
- **No self-barrels**: Within `components/dashboard/**`, prefer relative/leaf imports

### Styling Requirements
- Use only token/variant-based styling; no raw colors
- Follow design system variant patterns
- Maintain consistent theming with route groups

## Chat Components

### Chat Navigation & State Management
- Sidebar "Chat" link adds `?new=true` query parameter to `/dashboard/chat`
- `ChatWindow` detects `?new=true` and calls `clearChat()` from `useChat` hook
- `clearChat()` clears both React state and localStorage

For detailed chat implementation patterns, props, and accessibility, see [extended documentation](../../docs/ai/rules/dashboard-components.md#chat-implementation-details).

## Table Components

### Filter Mapping
- **MUST** use type-safe filter mapping
- **MUST** use parameterized queries (never SQL string interpolation)

### Column Renderers
- **MUST** attach renderers client-side
- **MUST NOT** pass functions from server to client

For detailed table component patterns, see [extended documentation](../../docs/ai/rules/dashboard-components.md#table-components---extended-patterns).

## Testing & Validation

For component testing examples and validation commands, see [extended documentation](../../docs/ai/rules/dashboard-components.md#testing--validation).

## Documentation Requirements

For component and API documentation requirements, see [extended documentation](../../docs/ai/rules/dashboard-components.md#documentation-requirements).

## Rules

- **MUST** respect runtime boundaries (no server-only imports in client components)
- **MUST** use public barrels: `@/components/dashboard` (client), `@/components/dashboard/server` (server)
- **MUST** use token/variant-based styling (no raw colors)
- **MUST** keep props additive and optional (backward compatible)
- **MUST** provide ARIA labels and semantic roles
- **MUST** use type-safe filters and SQL parameterization

## Enforcement

### ESLint Rules (Planned)
The following ESLint rules are planned for future implementation:
- `@corso/dashboard-boundaries`: Enforce client/server boundaries
- `@corso/no-sql-interpolation`: Prevent SQL injection
- `@corso/dashboard-accessibility`: Enforce accessibility

**Note**: These rules are not yet implemented in `eslint-plugin-corso`. Enforcement is currently handled via existing ESLint rules (e.g., `no-server-in-client`, `dashboard-import-guard`) and code review.

For AST-Grep rules, see [extended documentation](../../docs/ai/rules/dashboard-components.md).

### Quality gates

See the canonical command set in
[ai-agent-development-environment.mdc](mdc:.cursor/rules/ai-agent-development-environment.mdc#quality-gates-and-validation-commands).

### Domain-Specific Dashboard Commands
- **Component Tests**: `pnpm test:components`
- **Boundary Validation**: `pnpm validate:runtime-boundaries`
- **Dashboard Specific**: `pnpm validate:dashboard-components`

## Windows-first tips

See the canonical guidance in
[ai-agent-development-environment.mdc](mdc:.cursor/rules/ai-agent-development-environment.mdc#windows-first-tips).

## Related Rules

- `cursor/component-design-system` - Component architecture and design system
- `cursor/runtime-boundaries` - Server/Edge import safety
