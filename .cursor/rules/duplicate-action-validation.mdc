---
rule_id: duplicate-action-validation
title: "Actions: Duplicate Zod Validation"
owners:
  - platform@corso.io
status: active
domains: ["maintainability", "testing"]
enforcement: warn
alwaysApply: true
globs:
  - "app/**/actions/**"
  - "app/**/api/**/route.ts"
related_rules:
  - code-quality-standards
  - security-standards
last_reviewed: "2025-10-13"
summary: Detect and prevent duplicate Zod validation in action wrappers and implementations to avoid unnecessary runtime cost.
---

# Actions: Duplicate Zod Validation

**Detect duplicated Zod `.parse()` or `validateInput` usage across action wrappers and implementations to avoid double validation and unnecessary runtime cost.**

## TL;DR
- **Single validation**: Validate inputs once in wrapper, pass validated data to handler
- **No double parsing**: Avoid calling `.parse()` or `validateInput` multiple times on the same input
- **Performance**: Duplicate validation adds unnecessary runtime cost
- **Pattern**: Wrapper validates once, handler receives already-validated data

## Intent
Detect duplicated Zod `.parse()` or `validateInput` usage across action wrappers and implementations to avoid double validation and unnecessary runtime cost.

## Examples

```ts
// ✅ Good: validation performed once in wrapper
const validated = Schema.parse(input);
handler(validated);

// ❌ Bad: duplicate validation in wrapper and impl
const v1 = Schema.parse(input);
const v2 = Schema.parse(v1);
```

