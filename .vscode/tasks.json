{
  "version": "2.0.0",
  "inputs": [
    {
      "id": "confirmDestructive",
      "description": "Type 'PRUNE' to confirm this destructive operation",
      "default": "",
      "type": "promptString",
      "password": false
    }
  ],
  "tasks": [
    {
      "label": "ğŸš€ Full Setup (Install + Verify + Setup Branch)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "ğŸ“¦ Install Dependencies",
        "ğŸ” Verify AI Tools",
        "ğŸ”§ Setup Branch"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "âš¡ Quick Dev Start",
      "type": "shell",
      "command": "pnpm dev",
      "isBackground": true,
      "group": "build",
      "runOptions": {
        "runOn": "default"
      },
      "problemMatcher": [
        {
          "owner": "typescript",
          "pattern": {
            "regexp": "^([^\\s].*)\\((\\d+|\\d+,\\d+|\\d+,\\d+,\\d+,\\d+)\\):\\s+(error|warning|info)\\s+(TS\\d+)\\s*:\\s*(.*)$",
            "file": 1,
            "location": 2,
            "severity": 3,
            "code": 4,
            "message": 5
          },
          "background": {
            "activeOnStart": true,
            "beginsPattern": "^started server on .+, url",
            "endsPattern": "^waiting on"
          }
        }
      ],
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "scrollToBottom": true
      }
    },
    {
      "label": "ğŸ” Quality Gates (TypeCheck + Lint + Test)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "âš¡ Fast TypeCheck",
        "ğŸ§¹ Lint All",
        "ğŸ§ª Run All Tests"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      }
    },
    {
      "label": "âš¡ Fast TypeCheck",
      "type": "shell",
      "command": "pnpm",
      "args": [
        "typecheck:fast"
      ],
      "problemMatcher": [
        "$tsc"
      ],
      "group": "test",
      "presentation": {
        "reveal": "silent",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ”§ Full TypeCheck",
      "type": "shell",
      "command": "pnpm typecheck",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ§¹ Lint All",
      "type": "shell",
      "command": "pnpm lint",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ§¹ Lint Current File",
      "type": "shell",
      "command": "pnpm",
      "args": ["eslint", "${file}"],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": "$eslint-stylish"
    },
    {
      "label": "ğŸ§ª Run All Tests",
      "type": "shell",
      "command": "pnpm test",
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ§ª Test Current File",
      "type": "shell",
      "command": "pnpm",
      "args": ["vitest", "run", "${file}"],
      "presentation": {
        "reveal": "always",
        "panel": "new"
      }
    },
    {
      "label": "ğŸ“Š OpenAPI Generate",
      "type": "shell",
      "command": "pnpm openapi:gen",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ“‹ OpenAPI Validate",
      "type": "shell",
      "command": "pnpm openapi:rbac:check",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ”§ Build Project",
      "type": "shell",
      "command": "pnpm build",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ” Quality Local Check",
      "type": "shell",
      "command": "pnpm quality:local",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ§¹ Clean Cache",
      "type": "shell",
      "command": "pnpm typecheck:clean",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ”§ Environment Check",
      "type": "shell",
      "command": "pnpm validate:env",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ“¦ Install Dependencies",
      "type": "shell",
      "command": "pnpm install",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ” Validate Cursor Rules",
      "type": "shell",
      "command": "pnpm validate:cursor-rules",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ” Verify AI Tools",
      "type": "shell",
      "command": "pnpm run verify:ai-tools",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ”§ Setup Branch",
      "type": "shell",
      "command": "pnpm run setup:branch",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ” AST-Grep Scan",
      "type": "shell",
      "command": "pnpm ast-grep:scan",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ¯ Test Analytics Domain",
      "type": "shell",
      "command": "pnpm test:domain:analytics",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ¯ Test Billing Domain",
      "type": "shell",
      "command": "pnpm test:domain:billing",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ¯ Test Chat Domain",
      "type": "shell",
      "command": "pnpm test:domain:chat",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ›¡ï¸ Test Security",
      "type": "shell",
      "command": "pnpm test:security",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ§¹ Clean All Caches",
      "type": "shell",
      "command": "pnpm cleanup:all",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ“š Generate Docs",
      "type": "shell",
      "command": "pnpm docs:index",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "âœ… Docs: Lint Markdown",
      "type": "shell",
      "command": "pnpm docs:lint",
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ”— Docs: Validate (Links + Structure + Templates)",
      "type": "shell",
      "command": "pnpm docs:validate",
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ”¤ Docs: Spellcheck",
      "type": "shell",
      "command": "pnpm docs:spellcheck",
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "â° Docs: Check Stale",
      "type": "shell",
      "command": "pnpm docs:stale:check",
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§¾ Docs: Generate READMEs",
      "type": "shell",
      "command": "pnpm docs:generate:readme",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ“ Docs: Generate Directory READMEs",
      "type": "shell",
      "command": "pnpm docs:generate:directory-readmes",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ“Š Docs: Generate API Docs",
      "type": "shell",
      "command": "pnpm docs:api",
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "âœ… Docs: Verify Suite (Lint + Validate + Spell + Stale)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "âœ… Docs: Lint Markdown",
        "ğŸ”— Docs: Validate (Links + Structure + Templates)",
        "ğŸ”¤ Docs: Spellcheck",
        "â° Docs: Check Stale"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§¾ Docs: Refresh Suite (Index + READMEs)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "ğŸ“š Generate Docs",
        "ğŸ§¾ Docs: Generate READMEs",
        "ğŸ“ Docs: Generate Directory READMEs"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§° Docs: Maintenance Suite (Refresh + Verify)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "ğŸ§¾ Docs: Refresh Suite (Index + READMEs)",
        "âœ… Docs: Verify Suite (Lint + Validate + Spell + Stale)"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "scrollToBottom": true
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸš€ Docs: Auto-Publish to main (no-verify)",
      "type": "shell",
      "command": "pnpm",
      "args": ["docs:auto-publish"],
      "group": "build",
      "presentation": {
        "reveal": "silent",
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§ª Docs: Auto-Publish (dry-run)",
      "type": "shell",
      "command": "pnpm",
      "args": ["exec", "tsx", "scripts/maintenance/docs/autopublish.ts", "--dry-run"],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§ª Docs: Auto-Publish (dry-run, no pull)",
      "type": "shell",
      "command": "pnpm",
      "args": ["exec", "tsx", "scripts/maintenance/docs/autopublish.ts", "--dry-run", "--no-pull"],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "shared",
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    {
      "label": "TypeScript: watch",
      "type": "shell",
      "command": "pnpm tsc --noEmit --watch",
      "isBackground": true,
      "problemMatcher": "$tsc-watch",
      "presentation": {
        "reveal": "never",
        "panel": "dedicated"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "ğŸ”§ Git: Fetch All & Prune",
      "type": "shell",
      "command": "git fetch --all --prune",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "ğŸ”§ Git: Remote Prune origin",
      "type": "shell",
      "command": "git remote prune origin",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "âš ï¸ Git: Expire Reflog (destructive)",
      "type": "shell",
      "command": "node",
      "args": [
        "-e",
        "const confirm = process.env.CONFIRM_DESTRUCTIVE || ''; if (confirm !== 'PRUNE') { console.error('âŒ Confirmation failed. You must type PRUNE to confirm.'); process.exit(1); } const { execSync } = require('child_process'); execSync('git reflog expire --expire=now --all', { stdio: 'inherit', cwd: process.env.WORKSPACE_FOLDER });"
      ],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "CONFIRM_DESTRUCTIVE": "${input:confirmDestructive}",
          "WORKSPACE_FOLDER": "${workspaceFolder}"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "âš ï¸ Git: GC Prune (prune=now, destructive)",
      "type": "shell",
      "command": "node",
      "args": [
        "-e",
        "const confirm = process.env.CONFIRM_DESTRUCTIVE || ''; if (confirm !== 'PRUNE') { console.error('âŒ Confirmation failed. You must type PRUNE to confirm.'); process.exit(1); } const { execSync } = require('child_process'); execSync('git gc --prune=now', { stdio: 'inherit', cwd: process.env.WORKSPACE_FOLDER });"
      ],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "CONFIRM_DESTRUCTIVE": "${input:confirmDestructive}",
          "WORKSPACE_FOLDER": "${workspaceFolder}"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "âš ï¸ Git: Expire Reflog & GC Prune (destructive)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "âš ï¸ Git: Expire Reflog (destructive)",
        "âš ï¸ Git: GC Prune (prune=now, destructive)"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    }
  ]
}

